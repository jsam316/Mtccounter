<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="MTC Counter">
  <meta name="description" content="MTC church attendance counter app">
  <title>MTC Church Counter</title>
  <style>
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 25px;
      font-size: 28px;
    }
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #e5e7eb;
    }
    .tab {
      flex: 1;
      padding: 12px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-weight: 600;
      color: #6b7280;
      transition: all 0.3s;
    }
    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .input-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      color: #666;
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: 500;
    }
    input, select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: border 0.3s;
      max-width: 100%;
      box-sizing: border-box;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #667eea;
    }
    .verse-group {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 10px;
    }
    .total-box {
      background: #f5f5f5;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      text-align: center;
    }
    .total-title {
      font-weight: 500;
      margin-bottom: 15px;
      color: #666;
    }
    .total-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }
    .total-item {
      text-align: center;
    }
    .total-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }
    .total-number {
      font-size: 28px;
      font-weight: bold;
    }
    .male-total { color: #3b82f6; }
    .female-total { color: #a855f7; }
    .grand-total { color: #333; }
    .counter-box {
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 15px;
    }
    .male-box {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border: 2px solid #93c5fd;
    }
    .female-box {
      background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
      border: 2px solid #d8b4fe;
    }
    .counter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .counter-title {
      font-size: 20px;
      font-weight: 600;
    }
    .male-title { color: #1e40af; }
    .female-title { color: #7c3aed; }
    .counter-value {
      font-size: 36px;
      font-weight: bold;
    }
    .counter-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    button {
      padding: 15px;
      font-size: 20px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      -webkit-tap-highlight-color: transparent;
    }
    button:active {
      transform: scale(0.95);
    }
    .male-minus {
      background: white;
      color: #3b82f6;
      border: 2px solid #3b82f6;
    }
    .male-plus {
      background: #3b82f6;
      color: white;
    }
    .female-minus {
      background: white;
      color: #a855f7;
      border: 2px solid #a855f7;
    }
    .female-plus {
      background: #a855f7;
      color: white;
    }
    .save-btn {
      width: 100%;
      background: #3b82f6;
      color: white;
      margin-bottom: 10px;
    }
    .save-btn:hover {
      background: #2563eb;
    }
    .reset-btn {
      width: 100%;
      background: #e5e7eb;
      color: #374151;
      margin-bottom: 10px;
    }
    .reset-btn:hover {
      background: #d1d5db;
    }
    .export-btn {
      width: 100%;
      background: #10b981;
      color: white;
    }
    .export-btn:hover {
      background: #059669;
    }
    .success-msg {
      background: #d1fae5;
      color: #065f46;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-top: 15px;
      font-weight: 500;
      display: none;
    }
    .history-list {
      max-height: 400px;
      overflow-y: auto;
    }
    .history-item {
      background: #f9fafb;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .history-item:hover {
      background: #f3f4f6;
      border-color: #667eea;
    }
    .history-date {
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }
    .history-details {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
    }
    .history-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .history-btn {
      flex: 1;
      padding: 8px;
      font-size: 14px;
    }
    .load-btn {
      background: #3b82f6;
      color: white;
    }
    .delete-btn {
      background: #ef4444;
      color: white;
    }
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #9ca3af;
    }
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      .container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚õ™ MTC Counter</h1>

```
<div class="tabs">
  <button class="tab active" onclick="switchTab('counter')">üìä Counter</button>
  <button class="tab" onclick="switchTab('history')">üìÖ History</button>
</div>

<!-- Counter Tab -->
<div id="counterTab" class="tab-content active">
  <div class="input-group">
    <label>‚õ™ MarThoma Church Parish Name</label>
    <input type="text" id="parishName" placeholder="Enter parish name">
  </div>

  <div class="input-group">
    <label>üé® Theme</label>
    <select id="theme">
      <option value="default">Purple & Blue</option>
      <option value="ocean">Ocean (Cyan & Teal)</option>
      <option value="sunset">Sunset (Orange & Pink)</option>
      <option value="forest">Forest (Green & Emerald)</option>
    </select>
  </div>

  <div class="input-group">
    <label>üìÖ Date</label>
    <input type="date" id="date">
  </div>

  <div class="input-group">
    <label>üë§ Celebrant Name</label>
    <input type="text" id="celebrant" placeholder="Enter celebrant name">
  </div>

  <div class="input-group">
    <label>üìñ Sermon Title</label>
    <input type="text" id="sermon" placeholder="Enter sermon title">
  </div>

  <div class="input-group">
    <label>üìú Scripture Reference</label>
    <div class="verse-group">
      <select id="book">
        <option value="">Select Book</option>
        <option value="Genesis">Genesis</option>
        <option value="Exodus">Exodus</option>
        <option value="Leviticus">Leviticus</option>
        <option value="Numbers">Numbers</option>
        <option value="Deuteronomy">Deuteronomy</option>
        <option value="Joshua">Joshua</option>
        <option value="Judges">Judges</option>
        <option value="Ruth">Ruth</option>
        <option value="1 Samuel">1 Samuel</option>
        <option value="2 Samuel">2 Samuel</option>
        <option value="1 Kings">1 Kings</option>
        <option value="2 Kings">2 Kings</option>
        <option value="1 Chronicles">1 Chronicles</option>
        <option value="2 Chronicles">2 Chronicles</option>
        <option value="Ezra">Ezra</option>
        <option value="Nehemiah">Nehemiah</option>
        <option value="Esther">Esther</option>
        <option value="Job">Job</option>
        <option value="Psalms">Psalms</option>
        <option value="Proverbs">Proverbs</option>
        <option value="Ecclesiastes">Ecclesiastes</option>
        <option value="Song of Solomon">Song of Solomon</option>
        <option value="Isaiah">Isaiah</option>
        <option value="Jeremiah">Jeremiah</option>
        <option value="Lamentations">Lamentations</option>
        <option value="Ezekiel">Ezekiel</option>
        <option value="Daniel">Daniel</option>
        <option value="Hosea">Hosea</option>
        <option value="Joel">Joel</option>
        <option value="Amos">Amos</option>
        <option value="Obadiah">Obadiah</option>
        <option value="Jonah">Jonah</option>
        <option value="Micah">Micah</option>
        <option value="Nahum">Nahum</option>
        <option value="Habakkuk">Habakkuk</option>
        <option value="Zephaniah">Zephaniah</option>
        <option value="Haggai">Haggai</option>
        <option value="Zechariah">Zechariah</option>
        <option value="Malachi">Malachi</option>
        <option value="Matthew">Matthew</option>
        <option value="Mark">Mark</option>
        <option value="Luke">Luke</option>
        <option value="John">John</option>
        <option value="Acts">Acts</option>
        <option value="Romans">Romans</option>
        <option value="1 Corinthians">1 Corinthians</option>
        <option value="2 Corinthians">2 Corinthians</option>
        <option value="Galatians">Galatians</option>
        <option value="Ephesians">Ephesians</option>
        <option value="Philippians">Philippians</option>
        <option value="Colossians">Colossians</option>
        <option value="1 Thessalonians">1 Thessalonians</option>
        <option value="2 Thessalonians">2 Thessalonians</option>
        <option value="1 Timothy">1 Timothy</option>
        <option value="2 Timothy">2 Timothy</option>
        <option value="Titus">Titus</option>
        <option value="Philemon">Philemon</option>
        <option value="Hebrews">Hebrews</option>
        <option value="James">James</option>
        <option value="1 Peter">1 Peter</option>
        <option value="2 Peter">2 Peter</option>
        <option value="1 John">1 John</option>
        <option value="2 John">2 John</option>
        <option value="3 John">3 John</option>
        <option value="Jude">Jude</option>
        <option value="Revelation">Revelation</option>
      </select>
      <input type="number" id="chapter" placeholder="Ch" min="1">
      <input type="text" id="verse" placeholder="Verse">
    </div>
  </div>

  <div class="total-box">
    <div class="total-title">Total Attendance</div>
    <div class="total-grid">
      <div class="total-item">
        <div class="total-label">Male</div>
        <div class="total-number male-total" id="maleTotal">0</div>
      </div>
      <div class="total-item">
        <div class="total-label">Female</div>
        <div class="total-number female-total" id="femaleTotal">0</div>
      </div>
      <div class="total-item">
        <div class="total-label">Total</div>
        <div class="total-number grand-total" id="grandTotal">0</div>
      </div>
    </div>
  </div>

  <div class="counter-box male-box">
    <div class="counter-header">
      <span class="counter-title male-title">üë® Male</span>
      <span class="counter-value male-total" id="maleCount">0</span>
    </div>
    <div class="counter-buttons">
      <button class="male-minus" onclick="changeMale(-1)">‚àí</button>
      <button class="male-plus" onclick="changeMale(1)">+</button>
    </div>
  </div>

  <div class="counter-box female-box">
    <div class="counter-header">
      <span class="counter-title female-title">üë© Female</span>
      <span class="counter-value female-total" id="femaleCount">0</span>
    </div>
    <div class="counter-buttons">
      <button class="female-minus" onclick="changeFemale(-1)">‚àí</button>
      <button class="female-plus" onclick="changeFemale(1)">+</button>
    </div>
  </div>

  <button class="save-btn" onclick="saveRecord()">üíæ Save Record</button>
  <button class="reset-btn" onclick="reset()">üîÑ Reset Counters</button>
  <button class="export-btn" onclick="exportData()">üì§ Export as Text</button>
  
  <div id="successMsg" class="success-msg">
    ‚úì Saved successfully!
  </div>
</div>

<!-- History Tab -->
<div id="historyTab" class="tab-content">
  <div id="historyList" class="history-list">
    <div class="empty-state">
      <p>üìã No records yet</p>
      <p style="font-size: 14px; margin-top: 10px;">Save your first service record to see it here!</p>
    </div>
  </div>
</div>
```

  </div>

  <script>
    var male = 0;
    var female = 0;

    // Set today's date
    document.getElementById('date').valueAsDate = new Date();

    // Load saved records from localStorage
    function getHistory() {
      var history = localStorage.getItem('mtcHistory');
      return history ? JSON.parse(history) : [];
    }

    function saveHistory(records) {
      localStorage.setItem('mtcHistory', JSON.stringify(records));
    }

    function changeMale(amount) {
      male = Math.max(0, male + amount);
      updateDisplay();
    }

    function changeFemale(amount) {
      female = Math.max(0, female + amount);
      updateDisplay();
    }

    function updateDisplay() {
      document.getElementById('maleCount').textContent = male;
      document.getElementById('femaleCount').textContent = female;
      document.getElementById('maleTotal').textContent = male;
      document.getElementById('femaleTotal').textContent = female;
      document.getElementById('grandTotal').textContent = male + female;
    }

    function reset() {
      if (confirm('Reset all counters to 0?')) {
        male = 0;
        female = 0;
        updateDisplay();
      }
    }

    function saveRecord() {
      var date = document.getElementById('date').value;
      if (!date) {
        alert('Please select a date first!');
        return;
      }

      var parishName = document.getElementById('parishName').value || 'Not specified';
      var celebrant = document.getElementById('celebrant').value || 'Not specified';
      var sermon = document.getElementById('sermon').value || 'Not specified';
      var book = document.getElementById('book').value;
      var chapter = document.getElementById('chapter').value;
      var verse = document.getElementById('verse').value;
      
      var scripture = '';
      if (book) {
        scripture = book;
        if (chapter) {
          scripture += ' ' + chapter;
          if (verse) {
            scripture += ':' + verse;
          }
        }
      } else {
        scripture = 'Not specified';
      }

      var record = {
        date: date,
        parishName: parishName,
        celebrant: celebrant,
        sermon: sermon,
        scripture: scripture,
        male: male,
        female: female,
        total: male + female,
        timestamp: new Date().toISOString()
      };

      var history = getHistory();
      // Remove existing record for same date if any
      history = history.filter(function(r) { return r.date !== date; });
      // Add new record
      history.unshift(record);
      saveHistory(history);

      var msg = document.getElementById('successMsg');
      msg.style.display = 'block';
      setTimeout(function() {
        msg.style.display = 'none';
      }, 3000);

      displayHistory();
    }

    function displayHistory() {
      var history = getHistory();
      var listEl = document.getElementById('historyList');
      
      if (history.length === 0) {
        listEl.innerHTML = '<div class="empty-state"><p>üìã No records yet</p><p style="font-size: 14px; margin-top: 10px;">Save your first service record to see it here!</p></div>';
        return;
      }

      var html = '';
      history.forEach(function(record, index) {
        var dateObj = new Date(record.date + 'T00:00:00');
        var formattedDate = dateObj.toLocaleDateString('en-US', {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });

        html += '<div class="history-item">';
        html += '<div class="history-date">' + formattedDate + '</div>';
        html += '<div class="history-details">';
        html += '<strong>Parish:</strong> ' + record.parishName + '<br>';
        html += '<strong>Celebrant:</strong> ' + record.celebrant + '<br>';
        html += '<strong>Sermon:</strong> ' + record.sermon + '<br>';
        html += '<strong>Scripture:</strong> ' + record.scripture + '<br>';
        html += '<strong>Attendance:</strong> Male: ' + record.male + ', Female: ' + record.female + ', Total: ' + record.total;
        html += '</div>';
        html += '<div class="history-actions">';
        html += '<button class="history-btn load-btn" onclick="loadRecord(' + index + ')">üì• Load</button>';
        html += '<button class="history-btn delete-btn" onclick="deleteRecord(' + index + ')">üóëÔ∏è Delete</button>';
        html += '</div>';
        html += '</div>';
      });

      listEl.innerHTML = html;
    }

    function loadRecord(index) {
      var history = getHistory();
      var record = history[index];
      
      document.getElementById('date').value = record.date;
      document.getElementById('parishName').value = record.parishName === 'Not specified' ? '' : record.parishName;
      document.getElementById('celebrant').value = record.celebrant === 'Not specified' ? '' : record.celebrant;
      document.getElementById('sermon').value = record.sermon === 'Not specified' ? '' : record.sermon;
      
      // Parse scripture
      if (record.scripture && record.scripture !== 'Not specified') {
        var parts = record.scripture.split(' ');
        var bookName = parts.slice(0, -1).join(' ');
        var chapterVerse = parts[parts.length - 1];
        
        if (chapterVerse) {
          var cv = chapterVerse.split(':');
          document.getElementById('book').value = bookName;
          document.getElementById('chapter').value = cv[0] || '';
          document.getElementById('verse').value = cv[1] || '';
        }
      }
      
      male = record.male;
      female = record.female;
      updateDisplay();
      
      switchTab('counter');
    }

    function deleteRecord(index) {
      if (confirm('Are you sure you want to delete this record?')) {
        var history = getHistory();
        history.splice(index, 1);
        saveHistory(history);
        displayHistory();
      }
    }

    function switchTab(tab) {
      // Update tab buttons
      var tabs = document.querySelectorAll('.tab');
      tabs.forEach(function(t) {
        t.classList.remove('active');
      });
      
      // Update tab content
      document.getElementById('counterTab').classList.remove('active');
      document.getElementById('historyTab').classList.remove('active');
      
      if (tab === 'counter') {
        tabs[0].classList.add('active');
        document.getElementById('counterTab').classList.add('active');
      } else {
        tabs[1].classList.add('active');
        document.getElementById('historyTab').classList.add('active');
        displayHistory();
      }
    }

    function exportData() {
      var date = document.getElementById('date').value;
      var parishName = document.getElementById('parishName').value || 'Not specified';
      var celebrant = document.getElementById('celebrant').value || 'Not specified';
      var sermon = document.getElementById('sermon').value || 'Not specified';
      var book = document.getElementById('book').value;
      var chapter = document.getElementById('chapter').value;
      var verse = document.getElementById('verse').value;
      
      var scripture = '';
      if (book) {
        scripture = book;
        if (chapter) {
          scripture += ' ' + chapter;
          if (verse) {
            scripture += ':' + verse;
          }
        }
      } else {
        scripture = 'Not specified';
      }
      
      var dateObj = new Date(date + 'T00:00:00');
      var formattedDate = dateObj.toLocaleDateString('en-US', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });

      var text = 'Service Details - ' + formattedDate + '\n\n' +
                 'Parish: ' + parishName + '\n' +
                 'Celebrant: ' + celebrant + '\n' +
                 'Sermon: ' + sermon + '\n' +
                 'Scripture: ' + scripture + '\n\n' +
                 'Attendance Summary:\n' +
                 '‚Ä¢ Male: ' + male + '\n' +
                 '‚Ä¢ Female: ' + female + '\n' +
                 '‚Ä¢ Total Attendance: ' + (male + female);

      navigator.clipboard.writeText(text).then(function() {
        var msg = document.getElementById('successMsg');
        msg.textContent = '‚úì Copied to clipboard!';
        msg.style.display = 'block';
        setTimeout(function() {
          msg.style.display = 'none';
          msg.textContent = '‚úì Saved successfully!';
        }, 3000);
      }).catch(function(err) {
        alert('Copy this text:\n\n' + text);
      });
    }

    // Theme change functionality
    document.getElementById('theme').addEventListener('change', function(e) {
      var theme = e.target.value;
      var themes = {
        ocean: 'linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)',
        sunset: 'linear-gradient(135deg, #f97316 0%, #ec4899 100%)',
        forest: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
        default: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
      };
      
      document.body.style.background = themes[theme];
    });

    // Load history on page load
    displayHistory();
  </script>

</body>
</html>
